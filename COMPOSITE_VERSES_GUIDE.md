# üìñ –ü–æ—Å—ñ–±–Ω–∏–∫ –∑ –°–∫–ª–∞–¥–µ–Ω–∏—Ö –í—ñ—Ä—à—ñ–≤ (Composite Verses)

## üéØ –©–æ —Ü–µ —Ç–∞–∫–µ?

–°–∫–ª–∞–¥–µ–Ω—ñ –≤—ñ—Ä—à—ñ - —Ü–µ –≤—ñ—Ä—à—ñ, —è–∫—ñ –æ–±'—î–¥–Ω–∞–Ω—ñ –ø—ñ–¥ –æ–¥–Ω–∏–º –Ω–æ–º–µ—Ä–æ–º —É –≤–∏–≥–ª—è–¥—ñ –¥—ñ–∞–ø–∞–∑–æ–Ω—É.

**–ü—Ä–∏–∫–ª–∞–¥–∏:**
- `263-264` - –¥–≤–∞ –≤—ñ—Ä—à—ñ –æ–±'—î–¥–Ω–∞–Ω—ñ
- `256-266` - –æ–¥–∏–Ω–∞–¥—Ü—è—Ç—å –≤—ñ—Ä—à—ñ–≤ –æ–±'—î–¥–Ω–∞–Ω—ñ
- `10-15` - —à—ñ—Å—Ç—å –≤—ñ—Ä—à—ñ–≤ –æ–±'—î–¥–Ω–∞–Ω—ñ

**–î–µ –∑—É—Å—Ç—Ä—ñ—á–∞—é—Ç—å—Å—è:**
- –ß–∞–π—Ç–∞–Ω—å—è –ß–∞—Ä–∏—Ç–∞–º—Ä—ñ—Ç–∞ (CC Madhya 16.263-264, 16.265-266)
- –®—Ä—ñ–º–∞–¥ –ë—Ö–∞“ë–∞–≤–∞—Ç–∞–º (—Ä—ñ–∑–Ω—ñ –≥–ª–∞–≤–∏)
- –Ü–Ω—à—ñ –≤–µ–¥–∏—á–Ω—ñ —Ç–µ–∫—Å—Ç–∏

---

## üèóÔ∏è –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º–∏

### 1. –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö (–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –æ–±—Ä–æ–±–∫–∞)

**–ü–æ–ª—è –≤ —Ç–∞–±–ª–∏—Ü—ñ `verses`:**
```sql
verse_number      TEXT           -- "263-264" (–∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è —è–∫ —î)
is_composite      BOOLEAN        -- true –¥–ª—è —Å–∫–ª–∞–¥–µ–Ω–∏—Ö –≤—ñ—Ä—à—ñ–≤
start_verse       INTEGER        -- 263 (–ø–µ—Ä—à–∏–π –Ω–æ–º–µ—Ä)
end_verse         INTEGER        -- 264 (–æ—Å—Ç–∞–Ω–Ω—ñ–π –Ω–æ–º–µ—Ä)
verse_count       INTEGER        -- 2 (–∫—ñ–ª—å–∫—ñ—Å—Ç—å –≤—ñ—Ä—à—ñ–≤)
sort_key          INTEGER        -- 263 (–¥–ª—è —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è)
verse_number_sort BIGINT         -- 263000000 (–¥–ª—è —Ç–æ—á–Ω–æ–≥–æ —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è)
```

**üî• –í–ê–ñ–õ–ò–í–û:**
- –ú–µ—Ç–∞–¥–∞–Ω—ñ (`is_composite`, `start_verse`, `end_verse`, `verse_count`, `sort_key`) **–ù–ï** –≤—Å—Ç–∞–Ω–æ–≤–ª—é—é—Ç—å—Å—è –≤—Ä—É—á–Ω—É
- Database —Ç—Ä–∏–≥–µ—Ä `set_composite_verse_metadata` (–º—ñ–≥—Ä–∞—Ü—ñ—è `20251108220000_add_composite_verse_support.sql`) –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–∞—Ä—Å–∏—Ç—å `verse_number` –ø—Ä–∏ INSERT/UPDATE
- –§—É–Ω–∫—Ü—ñ—è: `parse_composite_verse()` - –≤–∏—Ç—è–≥—É—î —á–∏—Å–ª–∞ –∑ –¥—ñ–∞–ø–∞–∑–æ–Ω—É —Ç–∞ –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î –º–µ—Ç–∞–¥–∞–Ω—ñ
- –ó–±–µ—Ä—ñ–≥–∞–π—Ç–µ —Ç—ñ–ª—å–∫–∏ `verse_number` - —Ä–µ—à—Ç—É –∑—Ä–æ–±–∏—Ç—å —Ç—Ä–∏–≥–µ—Ä!
- **–°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è:** –í—ñ—Ä—à—ñ —Å–æ—Ä—Ç—É—é—Ç—å—Å—è –∑–∞ `sort_key` (–Ω–µ `verse_number_sort`), —â–æ –≥–∞—Ä–∞–Ω—Ç—É—î –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø–æ—Ä—è–¥–æ–∫ —Å–∫–ª–∞–¥–µ–Ω–∏—Ö –≤—ñ—Ä—à—ñ–≤

**–ü—Ä–∏–∫–ª–∞–¥:**
```sql
-- ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - —Ç—ñ–ª—å–∫–∏ verse_number
INSERT INTO verses (chapter_id, verse_number, sanskrit, translation_uk)
VALUES ('uuid', '263-264', '—Ç–µ–∫—Å—Ç —Å–∞–Ω—Å–∫—Ä–∏—Ç—É', '–ø–µ—Ä–µ–∫–ª–∞–¥');
-- –¢—Ä–∏–≥–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç—å: is_composite=true, start_verse=263, end_verse=264, etc.

-- ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª—é–π—Ç–µ –º–µ—Ç–∞–¥–∞–Ω—ñ –≤—Ä—É—á–Ω—É
INSERT INTO verses (chapter_id, verse_number, is_composite, start_verse, end_verse, ...)
VALUES ('uuid', '263-264', true, 263, 264, ...);  -- –¢—Ä–∏–≥–µ—Ä —ñ —Ç–∞–∫ —Ü–µ –∑—Ä–æ–±–∏—Ç—å!
```

---

## üì• –î–∂–µ—Ä–µ–ª–∞ –Ü–º–ø–æ—Ä—Ç—É

### ‚úÖ –ü—ñ–¥—Ç—Ä–∏–º—É—é—Ç—å—Å—è –∑–∞—Ä–∞–∑:

#### 1. **Vedabase** (`src/utils/vedabaseParser.ts`)
- ‚úÖ –í–ò–ü–†–ê–í–õ–ï–ù–û: –ó–±–∏—Ä–∞—î **–í–°–Ü** –±–ª–æ–∫–∏ —Å–∞–Ω—Å–∫—Ä–∏—Ç—É/–±–µ–Ω–≥–∞–ª—ñ —Ç–∞ —Ç—Ä–∞–Ω—Å–ª—ñ—Ç–µ—Ä–∞—Ü—ñ—ó
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `querySelectorAll()` –∑–∞–º—ñ—Å—Ç—å `querySelector()`
- –î–ª—è "228-229" –≤–∏—Ç—è–≥—É—î –æ–±–∏–¥–≤–∞ –±–ª–æ–∫–∏ —Ç–∞ –æ–±'—î–¥–Ω—É—î —á–µ—Ä–µ–∑ `\n`

**–ë—É–ª–æ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):**
```typescript
const bengaliContainer = doc.querySelector('.av-bengali div.text-center'); // ‚ùå —Ç—ñ–ª—å–∫–∏ –ø–µ—Ä—à–∏–π
bengali = bengaliContainer.innerHTML...
```

**–°—Ç–∞–ª–æ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):**
```typescript
const bengaliContainers = doc.querySelectorAll('.av-bengali div.text-center'); // ‚úÖ –≤—Å—ñ –±–ª–æ–∫–∏
bengaliContainers.forEach(container => {
  bengaliParts.push(container.innerHTML...);
});
bengali = bengaliParts.join('\n'); // –û–±'—î–¥–Ω—É—î–º–æ
```

#### 2. **Gitabase** (`src/utils/gitabaseParser.ts`)
- ‚úÖ –í–ò–ü–†–ê–í–õ–ï–ù–û: –ó–±–∏—Ä–∞—î **–í–°–Ü** –±–ª–æ–∫–∏ —Ç—Ä–∞–Ω—Å–ª—ñ—Ç–µ—Ä–∞—Ü—ñ—ó, —Å–∏–Ω–æ–Ω—ñ–º—ñ–≤ —Ç–∞ –ø–µ—Ä–µ–∫–ª–∞–¥—É
- –ó–∞–º—ñ—Å—Ç—å `break` –ø—ñ—Å–ª—è –ø–µ—Ä—à–æ–≥–æ –∑–±—ñ–≥—É - –∑–±–∏—Ä–∞—î –≤—Å—ñ –±–ª–æ–∫–∏ –≤ –º–∞—Å–∏–≤
- –û–±'—î–¥–Ω—É—î —á–µ—Ä–µ–∑ `\n` –¥–ª—è —Ç—Ä–∞–Ω—Å–ª—ñ—Ç–µ—Ä–∞—Ü—ñ—ó, `;` –¥–ª—è —Å–∏–Ω–æ–Ω—ñ–º—ñ–≤, –ø—Ä–æ–±—ñ–ª –¥–ª—è –ø–µ—Ä–µ–∫–ª–∞–¥—É

**–õ–æ–≥—É–≤–∞–Ω–Ω—è:**
```typescript
console.log(`üìù –ó–Ω–∞–π–¥–µ–Ω–æ ${transliterationParts.length} –±–ª–æ–∫—ñ–≤ —Ç—Ä–∞–Ω—Å–ª—ñ—Ç–µ—Ä–∞—Ü—ñ—ó (composite verse)`);
console.log(`üìñ –ó–Ω–∞–π–¥–µ–Ω–æ ${synonymsParts.length} –±–ª–æ–∫—ñ–≤ —Å–∏–Ω–æ–Ω—ñ–º—ñ–≤ (composite verse)`);
console.log(`üìÑ –ó–Ω–∞–π–¥–µ–Ω–æ ${translationParts.length} –±–ª–æ–∫—ñ–≤ –ø–µ—Ä–µ–∫–ª–∞–¥—É (composite verse)`);
```

#### 3. **EPUB** (`src/utils/import/epub.ts`)
- –í–∏—Ç—è–≥—É—î –Ω–æ–º–µ—Ä–∏ –∑ –∑–∞–≥–æ–ª–æ–≤–∫—ñ–≤: `<h1>Verses 10-15</h1>`
- –í–∏—Ç—è–≥—É—î –∑ –∞–Ω–∫–æ—Ä—ñ–≤: `<a id="verse-3-5">`
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `extractVerseNumberFromUrl()` –∑ `vedabaseParsers.ts`

#### 4. **–¢–µ–∫—Å—Ç–æ–≤—ñ —Ñ–∞–π–ª–∏** (`src/utils/import/splitters.ts`)
- –†–æ–∑–ø—ñ–∑–Ω–∞—î –¥—ñ–∞–ø–∞–∑–æ–Ω–∏ –≤ —Ñ–æ—Ä–º–∞—Ç—ñ: `"256-266"`, `"10-15"`
- –ü—ñ–¥—Ç—Ä–∏–º—É—î —Ä—ñ–∑–Ω—ñ —Ç–∏–ø–∏ —Ç–∏—Ä–µ: `-`, `‚Äì`, `‚Äî`
- –§—É–Ω–∫—Ü—ñ—è `normalizeVerseNumber()` –∑–±–µ—Ä—ñ–≥–∞—î —Ñ–æ—Ä–º–∞—Ç –¥—ñ–∞–ø–∞–∑–æ–Ω—É

---

### ‚úÖ –î–æ–¥–∞–Ω–æ –ø—ñ–¥—Ç—Ä–∏–º–∫—É:

#### 5. **PDF —Ñ–∞–π–ª–∏** (`src/utils/import/pdf.ts`)
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è
**–©–æ —Ä–æ–±–∏—Ç—å:**
```typescript
// –í–∏—Ç—è–≥—É—î –Ω–æ–º–µ—Ä–∏ –≤—ñ—Ä—à—ñ–≤ –∑ –∫–æ–∂–Ω–æ–≥–æ —Ä—è–¥–∫–∞ PDF
for (const line of lines) {
  const verseNum = extractVerseNumberFromUrl(line);
  if (verseNum) {
    enrichedText += `\n–í–Ü–†–® ${verseNum}\n`;
  }
}
```
**–†–æ–∑–ø—ñ–∑–Ω–∞—î:** "Verse 256-266", "Verses 10-15", "–¢–µ–∫—Å—Ç 256-266", "–í—ñ—Ä—à 10-15"

#### 6. **DOCX —Ñ–∞–π–ª–∏** (`src/utils/import/docx.ts`)
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è
**–©–æ —Ä–æ–±–∏—Ç—å:**
```typescript
// –ü–∞—Ä—Å–∏—Ç—å HTML –≤—ñ–¥ mammoth, —à—É–∫–∞—î –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö —ñ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞—Ö
const elements = doc.querySelectorAll('h1, h2, h3, h4, h5, h6, p, strong, b');
elements.forEach((element) => {
  const verseNum = extractVerseNumberFromUrl(element.textContent || '');
  if (verseNum) {
    enrichedText += `<p><strong>–í–Ü–†–® ${verseNum}</strong></p>\n`;
  }
});
```
**–†–æ–∑–ø—ñ–∑–Ω–∞—î:** –ù–æ–º–µ—Ä–∏ –≤—ñ—Ä—à—ñ–≤ —É –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö, –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞—Ö —Ç–∞ –≤–∏–¥—ñ–ª–µ–Ω–æ–º—É —Ç–µ–∫—Å—Ç—ñ

### üîß –¢—Ä–µ–±–∞ –¥–æ–¥–∞—Ç–∏ –ø—ñ–¥—Ç—Ä–∏–º–∫—É:

#### 7. **HTML —Ñ–∞–π–ª–∏**
**–°—Ç–∞—Ç—É—Å:** –¢—Ä–µ–±–∞ –¥–æ–¥–∞—Ç–∏
**–©–æ —Ç—Ä–µ–±–∞:** –°–µ–ª–µ–∫—Ç–æ—Ä–∏ –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫—ñ–≤ —Ç–∞ data-–∞—Ç—Ä–∏–±—É—Ç—ñ–≤

---

## üõ†Ô∏è –£—Ç–∏–ª—ñ—Ç–∏ (vedabaseParsers.ts)

### –û—Å–Ω–æ–≤–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó:

#### `parseVerseNumber(verseNumber: string): ParsedVerseNumber`
–†–æ–∑–±–∏—Ä–∞—î –Ω–æ–º–µ—Ä –≤—ñ—Ä—à–∞ —Ç–∞ –≤–∏–∑–Ω–∞—á–∞—î —á–∏ —Ü–µ —Å–∫–ª–∞–¥–µ–Ω–∏–π –≤—ñ—Ä—à.

```typescript
parseVerseNumber('263-264')
// ‚Üí {
//   isComposite: true,
//   startVerse: 263,
//   endVerse: 264,
//   displayNumber: '263-264',
//   sortKey: 263,
//   verseCount: 2
// }

parseVerseNumber('16.5')
// ‚Üí {
//   isComposite: false,
//   startVerse: 5,
//   endVerse: 5,
//   displayNumber: '16.5',
//   sortKey: 5,
//   verseCount: 1
// }
```

#### `normalizeVerseNumber(raw: string): string`
–ù–æ—Ä–º–∞–ª—ñ–∑—É—î –Ω–æ–º–µ—Ä (–≤–∏–¥–∞–ª—è—î –∑–∞–π–≤—ñ –ø—Ä–æ–±—ñ–ª–∏), –∑–±–µ—Ä—ñ–≥–∞—î —Ñ–æ—Ä–º–∞—Ç.

```typescript
normalizeVerseNumber('  263-264  ')  // ‚Üí '263-264'
normalizeVerseNumber('16.5')         // ‚Üí '16.5'
```

#### `extractVerseNumberFromUrl(url: string): string | null`
–í–∏—Ç—è–≥—É—î –Ω–æ–º–µ—Ä –∑ URL –∞–±–æ —Ç–µ–∫—Å—Ç—É.

```typescript
extractVerseNumberFromUrl('.../cc/madhya/16/265-266/')  // ‚Üí '265-266'
extractVerseNumberFromUrl('Verse 256-266')              // ‚Üí '256-266'
extractVerseNumberFromUrl('.../bg/2/13/')               // ‚Üí '13'
```

---

## üé® Frontend (–í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è)

### VedaReaderDB.tsx

**–ù–æ–≤—ñ –ø–æ–ª—è –≤ –∑–∞–ø–∏—Ç—ñ:**
```typescript
const { data } = await supabase
  .from("verses")
  .select(`
    *,
    is_composite,      // boolean
    start_verse,       // number
    end_verse,         // number
    verse_count,       // number
    sort_key           // number
  `)
  .order("verse_number_sort", { ascending: true });
```

**Fallback –Ω–∞ —ñ–Ω—à—É –º–æ–≤—É:**
```typescript
// –Ø–∫—â–æ translation_uk –≤—ñ–¥—Å—É—Ç–Ω—ñ–π, –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–æ–∫–∞–∑—É—î translation_en
const getTranslationWithFallback = (verse, field) => {
  const primaryField = language === 'ua' ? `${field}_uk` : `${field}_en`;
  const fallbackField = language === 'ua' ? `${field}_en` : `${field}_uk`;

  return verse[primaryField] || verse[fallbackField] || '';
};
```

### VerseCard.tsx

**–Ü–Ω–¥–∏–∫–∞—Ç–æ—Ä –¥–ª—è –∞–¥–º—ñ–Ω–∞:**
```tsx
{isAdmin && is_composite && (
  <div className="badge">
    –°–∫–ª–∞–¥–µ–Ω–∏–π –≤—ñ—Ä—à: {verse_count} –≤—ñ—Ä—à—ñ–≤ ({start_verse}-{end_verse})
  </div>
)}
```

---

## üìö –î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–æ—ó –∫–Ω–∏–≥–∏

### –ü—Ä–∏–∫–ª–∞–¥: –®—Ä—ñ–º–∞–¥ –ë—Ö–∞“ë–∞–≤–∞—Ç–∞–º –∑ —Å–∫–ª–∞–¥–µ–Ω–∏–º–∏ –≤—ñ—Ä—à–∞–º–∏

**1. –û–Ω–æ–≤–∏—Ç–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é –∫–Ω–∏–≥–∏** (`src/utils/Vedabase-books.ts`):
```typescript
{
  slug: 'sb',
  name_uk: '–®—Ä—ñ–º–∞–¥ –ë—Ö–∞“ë–∞–≤–∞—Ç–∞–º',
  name_en: 'Srimad Bhagavatam',
  hasGitabaseUA: false,  // —á–∏ —î —É–∫—Ä–∞—ó–Ω—Å—å–∫–∏–π –ø–µ—Ä–µ–∫–ª–∞–¥ –Ω–∞ Gitabase
  isMultiVolume: true,   // —á–∏ –º–∞—î —Ç–æ–º–∏ (Cantos)
  cantos: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12],
  // ... —ñ–Ω—à—ñ –ø–æ–ª—è
}
```

**2. –Ü–º–ø–æ—Ä—Ç –≥–ª–∞–≤–∏ –∑ —Å–∫–ª–∞–¥–µ–Ω–∏–º–∏ –≤—ñ—Ä—à–∞–º–∏:**
- –Ø–∫—â–æ –∑ Vedabase - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Ä–æ–∑–ø—ñ–∑–Ω–∞—î—Ç—å—Å—è
- –Ø–∫—â–æ –∑ —Ñ–∞–π–ª—É - —Ç—Ä–µ–±–∞ —â–æ–± –Ω–æ–º–µ—Ä–∏ –±—É–ª–∏ –≤ —Ñ–æ—Ä–º–∞—Ç—ñ "256-266"

**3. –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö:**
- –ù—ñ—á–æ–≥–æ –Ω–µ —Ç—Ä–µ–±–∞ –Ω–∞–ª–∞—à—Ç–æ–≤—É–≤–∞—Ç–∏ - —Ç—Ä–∏–≥–µ—Ä –ø—Ä–∞—Ü—é—î –¥–ª—è –≤—Å—ñ—Ö –∫–Ω–∏–≥ –æ–¥–Ω–∞–∫–æ–≤–æ!

---

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —ñ–º–ø–æ—Ä—Ç—É:

**1. –ó Vedabase:**
```
–ö–Ω–∏–≥–∞: –ß–∞–π—Ç–∞–Ω—å—è –ß–∞—Ä–∏—Ç–∞–º—Ä—ñ—Ç–∞
–¢–æ–º: Madhya
–ì–ª–∞–≤–∞: 16
–í—ñ—Ä—à—ñ: 260-270 (–∞–≤—Ç–æ–≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è)
```

**–û—á—ñ–∫—É—î—Ç—å—Å—è:**
- –í—ñ—Ä—à—ñ 263-264 —Ç–∞ 265-266 —ñ–º–ø–æ—Ä—Ç—É—é—Ç—å—Å—è —è–∫ —Å–∫–ª–∞–¥–µ–Ω—ñ
- `is_composite = true`
- –£–∫—Ä–∞—ó–Ω—Å—å–∫–∏–π –ø–µ—Ä–µ–∫–ª–∞–¥ –ø—Ä–∏—Å—É—Ç–Ω—ñ–π (—è–∫—â–æ –∑ Gitabase)

**2. –ó EPUB:**
```
–§–∞–π–ª –∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏: "Verses 10-15"
```

**–û—á—ñ–∫—É—î—Ç—å—Å—è:**
- –†–æ–∑–ø—ñ–∑–Ω–∞—î—Ç—å—Å—è —è–∫ "10-15"
- –ó–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ –ë–î
- –¢—Ä–∏–≥–µ—Ä –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î –º–µ—Ç–∞–¥–∞–Ω—ñ

**3. –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è:**
```sql
-- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤ –ë–î
SELECT verse_number, is_composite, start_verse, end_verse, verse_count, sort_key
FROM verses
WHERE chapter_id = 'uuid' AND is_composite = true;
```

**–û—á—ñ–∫—É—î—Ç—å—Å—è:**
```
verse_number | is_composite | start_verse | end_verse | verse_count | sort_key
263-264      | true         | 263         | 264       | 2           | 263
265-266      | true         | 265         | 266       | 2           | 265
```

---

## üêõ –¢–∏–ø–æ–≤—ñ –ø—Ä–æ–±–ª–µ–º–∏ —Ç–∞ —Ä—ñ—à–µ–Ω–Ω—è

### –ü—Ä–æ–±–ª–µ–º–∞ 1: "integer out of range"
**–ü—Ä–∏—á–∏–Ω–∞:** –ü–æ–ª–µ `verse_number_sort` –±—É–ª–æ `INTEGER` –∑–∞–º—ñ—Å—Ç—å `BIGINT`
**–†—ñ—à–µ–Ω–Ω—è:** ‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ - —Ç–µ–ø–µ—Ä `BIGINT`

### –ü—Ä–æ–±–ª–µ–º–∞ 2: Gitabase –ø–æ–≤–µ—Ä—Ç–∞—î 404 –¥–ª—è —Å–∫–ª–∞–¥–µ–Ω–∏—Ö –≤—ñ—Ä—à—ñ–≤
**–ü—Ä–∏—á–∏–Ω–∞:** –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞–≤—Å—è `t.from` –∑–∞–º—ñ—Å—Ç—å `t.lastPart`
**–†—ñ—à–µ–Ω–Ω—è:** ‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ `UniversalImportFixed.tsx`

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –ü–æ—Ä–æ–∂–Ω—ñ–π –∫–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è —Å–∫–ª–∞–¥–µ–Ω–∏—Ö –≤—ñ—Ä—à—ñ–≤
**–ü—Ä–∏—á–∏–Ω–∞:** –í—ñ–¥—Å—É—Ç–Ω—ñ–π `translation_uk`, –Ω–µ –±—É–ª–æ fallback –Ω–∞ `translation_en`
**–†—ñ—à–µ–Ω–Ω—è:** ‚úÖ –î–æ–¥–∞–Ω–æ `getTranslationWithFallback()` –≤ `VedaReaderDB.tsx`

### –ü—Ä–æ–±–ª–µ–º–∞ 4: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–µ —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è
**–ü—Ä–∏—á–∏–Ω–∞:** –ö–ª—ñ—î–Ω—Ç —Å–æ—Ä—Ç—É–≤–∞–≤ –ø–æ `verse_number` —è–∫ string
**–†—ñ—à–µ–Ω–Ω—è:** ‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ `sort_key` –∑ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö

---

## üìù –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è –Ω–æ–≤–∏—Ö –¥–∂–µ—Ä–µ–ª —ñ–º–ø–æ—Ä—Ç—É

–Ø–∫—â–æ –¥–æ–¥–∞—î—Ç–µ –Ω–æ–≤–∏–π —Ç–∏–ø —ñ–º–ø–æ—Ä—Ç—É (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∑ API):

- [ ] –†–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è –¥—ñ–∞–ø–∞–∑–æ–Ω—ñ–≤ –≤ —Ñ–æ—Ä–º–∞—Ç—ñ `"X-Y"`
- [ ] –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `normalizeVerseNumber()` –ø–µ—Ä–µ–¥ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è–º
- [ ] –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Ç—ñ–ª—å–∫–∏ `verse_number` (–Ω–µ –º–µ—Ç–∞–¥–∞–Ω–∏—Ö!)
- [ ] –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∑ —Ä–µ–∞–ª—å–Ω–∏–º–∏ —Å–∫–ª–∞–¥–µ–Ω–∏–º–∏ –≤—ñ—Ä—à–∞–º–∏
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —â–æ —Ç—Ä–∏–≥–µ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–∏–≤ –º–µ—Ç–∞–¥–∞–Ω—ñ
- [ ] Fallback –Ω–∞ –∞–Ω–≥–ª—ñ–π—Å—å–∫–∏–π —è–∫—â–æ —É–∫—Ä–∞—ó–Ω—Å—å–∫–∏–π –≤—ñ–¥—Å—É—Ç–Ω—ñ–π
- [ ] –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –¥–ª—è –∞–¥–º—ñ–Ω–∞

---

## üöÄ –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏

### –ö–æ—Ä–æ—Ç–∫–æ—Å—Ç—Ä–æ–∫–æ–≤—ñ:
1. ‚úÖ Dodano –ø—ñ–¥—Ç—Ä–∏–º–∫—É EPUB
2. ‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ Gitabase URLs
3. ‚úÖ –î–æ–¥–∞–Ω–æ fallback –Ω–∞ EN
4. ‚úÖ –î–æ–¥–∞–Ω–æ –ø—ñ–¥—Ç—Ä–∏–º–∫—É PDF —Ç–∞ DOCX
5. üîÑ –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ —ñ–º–ø–æ—Ä—Ç —Ä—ñ–∑–Ω–∏—Ö –∫–Ω–∏–≥
6. üîÑ –î–æ–¥–∞—Ç–∏ –ø—ñ–¥—Ç—Ä–∏–º–∫—É HTML —Ñ–∞–π–ª—ñ–≤

### –î–æ–≤–≥–æ—Å—Ç—Ä–æ–∫–æ–≤—ñ:
1. –ú–∞—Å–æ–≤–∏–π —ñ–º–ø–æ—Ä—Ç –≥–ª–∞–≤ –∑ —Å–∫–ª–∞–¥–µ–Ω–∏–º–∏ –≤—ñ—Ä—à–∞–º–∏
2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤–∏—è–≤–ª–µ–Ω–Ω—è —Å–∫–ª–∞–¥–µ–Ω–∏—Ö –≤—ñ—Ä—à—ñ–≤ –≤ —ñ—Å–Ω—É—é—á–∏—Ö –¥–∞–Ω–∏—Ö
3. UI –¥–ª—è —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –¥—ñ–∞–ø–∞–∑–æ–Ω—ñ–≤
4. –ï–∫—Å–ø–æ—Ä—Ç –∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é —Å–∫–ª–∞–¥–µ–Ω–∏—Ö –≤—ñ—Ä—à—ñ–≤

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç–∏ —Ç–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞

–Ø–∫—â–æ –≤–∏–Ω–∏–∫–∞—é—Ç—å –ø—Ä–æ–±–ª–µ–º–∏ –∑ —Å–∫–ª–∞–¥–µ–Ω–∏–º–∏ –≤—ñ—Ä—à–∞–º–∏:
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ –∫–æ–Ω—Å–æ–ª—ñ (üá∫üá¶ Parsing Gitabase for...)
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ë–î –∑–∞–ø–∏—Ç–æ–º –∑ –ø—Ä–∏–∫–ª–∞–¥—É –≤–∏—â–µ
3. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è —â–æ `verse_number_sort` –º–∞—î —Ç–∏–ø `BIGINT`

**–ü—Ä–∏–∫–ª–∞–¥–∏ —Ä–µ–∞–ª—å–Ω–∏—Ö —Å–∫–ª–∞–¥–µ–Ω–∏—Ö –≤—ñ—Ä—à—ñ–≤ –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è:**
- CC Madhya 16.263-264
- CC Madhya 16.265-266
- CC Madhya 20.XXX (–∑–Ω–∞–π–¥—ñ—Ç—å —ñ–Ω—à—ñ –Ω–∞ Vedabase)
