# Playwright Parser Server

–°–µ—Ä–≤–µ—Ä –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥—É —Ä–æ–∑–¥—ñ–ª—ñ–≤ –∑ Vedabase —Ç–∞ Gitabase –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º Playwright.

## –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

### –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
./tools/start_parser_server.sh
```

–ê–±–æ –≤—Ä—É—á–Ω—É:

```bash
python3 tools/parse_server.py
```

### –ó—É–ø–∏–Ω–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

```bash
./tools/stop_parser_server.sh
```

## –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π

–ü—Ä–∏ –ø–µ—Ä—à–æ–º—É –∑–∞–ø—É—Å–∫—É —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ. –î–ª—è —Ä—É—á–Ω–æ–≥–æ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è:

```bash
pip3 install -r tools/requirements.txt
playwright install chromium
```

## –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É

```bash
curl http://127.0.0.1:5003/health
```

–û—á—ñ–∫—É–≤–∞–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å:
```json
{"status": "ok"}
```

## –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

–ü—ñ—Å–ª—è –∑–∞–ø—É—Å–∫—É —Å–µ—Ä–≤–µ—Ä–∞ –ø–µ—Ä–µ–π–¥—ñ—Ç—å –≤ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ —Ç–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Ñ—É–Ω–∫—Ü—ñ—é "Web Import" –¥–ª—è —ñ–º–ø–æ—Ä—Ç—É –Ω–æ–≤–∏—Ö —Ä–æ–∑–¥—ñ–ª—ñ–≤.

–Ü–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å—Ç–∞—Ç—É—Å—É –≤ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ –ø–æ–∫–∞–∂–µ:
- üü¢ **–û–Ω–ª–∞–π–Ω** - —Å–µ—Ä–≤–µ—Ä –ø—Ä–∞—Ü—é—î, –≤–µ–±-—ñ–º–ø–æ—Ä—Ç –¥–æ—Å—Ç—É–ø–Ω–∏–π
- üü° **–û—Ñ–ª–∞–π–Ω (–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è fallback)** - —Å–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω–∏–π, –≤–µ–±-—ñ–º–ø–æ—Ä—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π

## API Endpoint

**URL:** `http://127.0.0.1:5003/admin/parse-web-chapter`
**Method:** POST
**Content-Type:** application/json

### –ü—Ä–∏–∫–ª–∞–¥ –∑–∞–ø–∏—Ç—É:

```json
{
  "lila": 1,
  "chapter": 1,
  "verse_ranges": "1-110",
  "vedabase_base": "https://vedabase.io/en/library/cc/adi/1/",
  "gitabase_base": "https://gitabase.com/ua/CC/1/1"
}
```

## –õ–æ–≥–∏

–õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ `/tmp/parse_server.log`:

```bash
tail -f /tmp/parse_server.log
```

## –£—Å—É–Ω–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º

### –°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è

1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏: `cat /tmp/parse_server.log`
2. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –ø–æ—Ä—Ç 5003 –≤—ñ–ª—å–Ω–∏–π: `lsof -i:5003`
3. –ü–µ—Ä–µ–≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ: `pip3 install -r tools/requirements.txt --force-reinstall`

### –ü–æ–º–∏–ª–∫–∞ "No module named..."

–í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –≤—ñ–¥—Å—É—Ç–Ω—ñ–π –º–æ–¥—É–ª—å:
```bash
pip3 install <module_name>
```

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

–î–µ—Ç–∞–ª—å–Ω—ñ—à—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –¥–∏–≤:
- `API_INTEGRATION.md` - –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º
- `PARSER_FIXES.md` - –Ü—Å—Ç–æ—Ä—ñ—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω—å –ø–∞—Ä—Å–µ—Ä–∞
- `TRANSLITERATION_RULES.md` - –ü—Ä–∞–≤–∏–ª–∞ —Ç—Ä–∞–Ω—Å–ª—ñ—Ç–µ—Ä–∞—Ü—ñ—ó
